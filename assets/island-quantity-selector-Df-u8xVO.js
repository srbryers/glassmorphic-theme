var m=Object.defineProperty;var c=(a,n,t)=>n in a?m(a,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[n]=t;var s=(a,n,t)=>c(a,typeof n!="symbol"?n+"":n,t);class p extends HTMLElement{constructor(){super(...arguments);s(this,"input",null);s(this,"decrementBtn",null);s(this,"incrementBtn",null);s(this,"min",1);s(this,"max",1/0);s(this,"step",1)}connectedCallback(){console.log("[Island] quantity-selector hydrated (client:visible)"),this.input=this.querySelector('input[type="number"]'),this.decrementBtn=this.querySelector("[data-decrement]"),this.incrementBtn=this.querySelector("[data-increment]"),this.loadConfig(),this.setupEventListeners(),this.updateButtonStates(),this.setAttribute("data-hydrated","true")}loadConfig(){this.input&&(this.min=parseInt(this.input.min)||1,this.max=parseInt(this.input.max)||1/0,this.step=parseInt(this.input.step)||1),this.dataset.min&&(this.min=parseInt(this.dataset.min)),this.dataset.max&&(this.max=parseInt(this.dataset.max)),this.dataset.step&&(this.step=parseInt(this.dataset.step))}setupEventListeners(){var t,i,h,r,d,u,l;(t=this.decrementBtn)==null||t.addEventListener("click",()=>{this.decrement()}),(i=this.incrementBtn)==null||i.addEventListener("click",()=>{this.increment()}),(h=this.input)==null||h.addEventListener("change",()=>{this.validate()}),(r=this.input)==null||r.addEventListener("blur",()=>{this.validate()}),(d=this.decrementBtn)==null||d.addEventListener("keydown",e=>{e.key==="ArrowDown"?(e.preventDefault(),this.decrement()):e.key==="ArrowUp"&&(e.preventDefault(),this.increment())}),(u=this.incrementBtn)==null||u.addEventListener("keydown",e=>{e.key==="ArrowDown"?(e.preventDefault(),this.decrement()):e.key==="ArrowUp"&&(e.preventDefault(),this.increment())}),(l=this.input)==null||l.addEventListener("keydown",e=>{[8,46,9,27,13,37,38,39,40].includes(e.keyCode)||(e.keyCode===65||e.keyCode===67||e.keyCode===86||e.keyCode===88)&&(e.ctrlKey||e.metaKey)||(e.shiftKey||e.keyCode<48||e.keyCode>57)&&(e.keyCode<96||e.keyCode>105)&&e.preventDefault()})}getValue(){var t;return parseInt(((t=this.input)==null?void 0:t.value)||"1")||this.min}setValue(t){if(!this.input)return;const i=Math.min(Math.max(t,this.min),this.max);this.input.value=i.toString(),this.updateButtonStates(),this.dispatchChangeEvent(i)}increment(){this.setValue(this.getValue()+this.step)}decrement(){this.setValue(this.getValue()-this.step)}validate(){let t=this.getValue();t=Math.min(Math.max(t,this.min),this.max);const i=(t-this.min)%this.step;i!==0&&(t=t-i),this.setValue(t)}updateButtonStates(){const t=this.getValue();this.decrementBtn&&(this.decrementBtn.disabled=t<=this.min,this.decrementBtn.classList.toggle("opacity-50",t<=this.min)),this.incrementBtn&&(this.incrementBtn.disabled=t>=this.max,this.incrementBtn.classList.toggle("opacity-50",t>=this.max))}dispatchChangeEvent(t){var i;this.dispatchEvent(new CustomEvent("quantity:change",{bubbles:!0,detail:{value:t}})),(i=this.input)==null||i.dispatchEvent(new Event("input",{bubbles:!0}))}get value(){return this.getValue()}set value(t){this.setValue(t)}}customElements.define("quantity-selector",p);
