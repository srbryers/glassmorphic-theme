var a=Object.defineProperty;var r=(o,i,e)=>i in o?a(o,i,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[i]=e;var n=(o,i,e)=>r(o,typeof i!="symbol"?i+"":i,e);class h extends HTMLElement{constructor(){super(...arguments);n(this,"menuButton",null);n(this,"mobileMenu",null);n(this,"isMenuOpen",!1);n(this,"header",null);n(this,"lastScrollY",0);n(this,"isScrolled",!1);n(this,"handleScroll",()=>{var s;const e=window.scrollY,t=e>50;t!==this.isScrolled&&(this.isScrolled=t,(s=this.header)==null||s.classList.toggle("header-scrolled",t)),this.lastScrollY=e});n(this,"handleResize",()=>{window.innerWidth>=768&&this.isMenuOpen&&this.closeMenu()});n(this,"handleKeydown",e=>{var t;e.key==="Escape"&&this.isMenuOpen&&(this.closeMenu(),(t=this.menuButton)==null||t.focus())})}connectedCallback(){console.log("[Island] header-nav hydrated (client:load)"),this.menuButton=this.querySelector("[data-menu-toggle]"),this.mobileMenu=this.querySelector("[data-mobile-menu]"),this.header=this.closest("header"),this.setupMenuToggle(),this.setupDropdowns(),this.setupScrollBehavior(),this.setupKeyboardNavigation(),this.setAttribute("data-hydrated","true")}disconnectedCallback(){window.removeEventListener("scroll",this.handleScroll),window.removeEventListener("resize",this.handleResize),document.removeEventListener("keydown",this.handleKeydown)}setupMenuToggle(){!this.menuButton||!this.mobileMenu||(this.menuButton.addEventListener("click",()=>{this.toggleMenu()}),document.addEventListener("click",e=>{this.isMenuOpen&&!this.contains(e.target)&&this.closeMenu()}))}setupDropdowns(){this.querySelectorAll("[data-dropdown-trigger]").forEach(t=>{var l;const s=t.nextElementSibling;s!=null&&s.hasAttribute("data-dropdown")&&(t.addEventListener("mouseenter",()=>{window.innerWidth>=768&&this.openDropdown(s)}),(l=t.parentElement)==null||l.addEventListener("mouseleave",()=>{window.innerWidth>=768&&this.closeDropdown(s)}),t.addEventListener("click",d=>{window.innerWidth<768&&(d.preventDefault(),this.toggleDropdown(s))}))})}setupScrollBehavior(){this.handleScroll=this.handleScroll.bind(this),this.handleResize=this.handleResize.bind(this),window.addEventListener("scroll",this.handleScroll,{passive:!0}),window.addEventListener("resize",this.handleResize,{passive:!0}),this.handleScroll()}setupKeyboardNavigation(){this.handleKeydown=this.handleKeydown.bind(this),document.addEventListener("keydown",this.handleKeydown)}toggleMenu(){this.isMenuOpen?this.closeMenu():this.openMenu()}openMenu(){if(!this.mobileMenu||!this.menuButton)return;this.isMenuOpen=!0,this.mobileMenu.classList.remove("hidden"),this.mobileMenu.setAttribute("aria-hidden","false"),this.menuButton.setAttribute("aria-expanded","true"),requestAnimationFrame(()=>{var t;(t=this.mobileMenu)==null||t.classList.add("menu-open")}),document.body.style.overflow="hidden";const e=this.mobileMenu.querySelector("a");e==null||e.focus()}closeMenu(){!this.mobileMenu||!this.menuButton||(this.isMenuOpen=!1,this.mobileMenu.classList.remove("menu-open"),this.mobileMenu.setAttribute("aria-hidden","true"),this.menuButton.setAttribute("aria-expanded","false"),document.body.style.overflow="",setTimeout(()=>{var e;this.isMenuOpen||(e=this.mobileMenu)==null||e.classList.add("hidden")},300))}openDropdown(e){e.classList.remove("hidden"),e.setAttribute("aria-hidden","false"),requestAnimationFrame(()=>{e.classList.add("dropdown-open")})}closeDropdown(e){e.classList.remove("dropdown-open"),e.setAttribute("aria-hidden","true"),setTimeout(()=>{e.classList.contains("dropdown-open")||e.classList.add("hidden")},200)}toggleDropdown(e){e.classList.contains("dropdown-open")?this.closeDropdown(e):this.openDropdown(e)}}customElements.define("header-nav",h);
