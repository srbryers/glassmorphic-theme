{%- comment -%}
  Newsletter Section

  Standalone newsletter signup section with navy background.
  Designed to sit above the footer with matching wave transition.
{%- endcomment -%}

{%- liquid
  assign bg_color = section.settings.background_color | default: '#1B3A4B'
-%}

{%- comment -%} Wave divider - colored to match this section {%- endcomment -%}
<div class="w-full leading-none" style="margin-top: -60px; margin-bottom: -2px; position: relative; z-index: 10;">
  {% render 'wave-divider', color: bg_color, direction: 'up', animate: true %}
</div>

<section class="relative py-16 md:py-20 overflow-hidden" style="background-color: {{ bg_color }}; margin-top: -1px;">
  {%- comment -%} Decorative gradient orbs {%- endcomment -%}
  <div class="absolute top-0 left-1/4 w-96 h-96 bg-white/5 rounded-full blur-3xl pointer-events-none"></div>
  <div class="absolute bottom-0 right-1/4 w-64 h-64 bg-[var(--primary)]/10 rounded-full blur-3xl pointer-events-none"></div>

  {%- comment -%} Top glass border accent {%- endcomment -%}
  <div class="absolute top-0 inset-x-0 h-px bg-gradient-to-r from-transparent via-white/20 to-transparent"></div>

  <div class="relative container">
    <div class="max-w-2xl mx-auto text-center">
      <h2 class="text-2xl sm:text-3xl md:text-4xl font-bold text-white mb-4">
        {{ section.settings.heading | default: 'Stay in the Loop' }}
      </h2>

      <p class="text-white/70 text-lg mb-8 leading-relaxed">
        {{ section.settings.description | default: 'Subscribe to our newsletter for updates, new arrivals, and exclusive offers.' }}
      </p>

      {%- form 'customer', class: 'flex flex-col sm:flex-row gap-3 max-w-md mx-auto' -%}
        <input type="hidden" name="contact[tags]" value="newsletter">

        <div class="flex-1 relative">
          <input
            type="email"
            name="contact[email]"
            class="w-full px-5 py-4 bg-white/10 border border-white/20 rounded-xl text-white placeholder:text-white/40 focus:outline-none focus:border-white/40 focus:bg-white/15 focus:shadow-[0_0_0_3px_rgba(255,255,255,0.1)] transition-all duration-300"
            placeholder="{{ section.settings.placeholder | default: 'Enter your email' }}"
            required
            autocomplete="email"
          >
        </div>

        <button type="submit" class="btn-primary px-8 py-4 whitespace-nowrap">
          {{ section.settings.button_text | default: 'Subscribe' }}
          <svg class="w-4 h-4 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3"/>
          </svg>
        </button>
      {%- endform -%}

      {%- if section.settings.disclaimer != blank -%}
        <p class="text-white/40 text-sm mt-4">
          {{ section.settings.disclaimer }}
        </p>
      {%- endif -%}
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Newsletter",
  "tag": "section",
  "class": "section-newsletter",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Stay in the Loop"
    },
    {
      "type": "textarea",
      "id": "description",
      "label": "Description",
      "default": "Subscribe to our newsletter for updates, new arrivals, and exclusive offers."
    },
    {
      "type": "text",
      "id": "placeholder",
      "label": "Email placeholder",
      "default": "Enter your email"
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "Button text",
      "default": "Subscribe"
    },
    {
      "type": "text",
      "id": "disclaimer",
      "label": "Disclaimer text",
      "default": "We respect your privacy. Unsubscribe at any time."
    },
    {
      "type": "header",
      "content": "Style"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background color",
      "default": "#1B3A4B"
    }
  ],
  "presets": [
    {
      "name": "Newsletter"
    }
  ]
}
{% endschema %}
